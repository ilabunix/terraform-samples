// E) Session Filter - Time-based (No Timezone Parsing)
// Use built-in session.ismarket or simple time checks
in_session = true  // Start with always true

// If you want RTH filtering, use TradingView's built-in
// For ES/NQ: RTH is 9:30 AM - 4:00 PM ET
// But to avoid timezone parsing, we'll use a simple time range check

// Get time in minutes since midnight (works on any timezone if chart is set correctly)
current_time_mins = hour * 60 + minute

// RTH in minutes: 9:30 AM = 570 mins, 4:00 PM = 960 mins
// Adjust these if your chart timezone differs
rth_start = 570   // 9:30 AM
rth_end = 960     // 4:00 PM

is_rth = current_time_mins >= rth_start and current_time_mins < rth_end

// Avoid first/last N minutes
avoid_open = current_time_mins < (rth_start + avoid_open_mins)
avoid_close = current_time_mins >= (rth_end - avoid_close_mins)

session_ok = is_rth and not avoid_open and not avoid_close
